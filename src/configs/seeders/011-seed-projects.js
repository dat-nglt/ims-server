"use strict";

/**
 * Seeder 011: Seed Projects
 */
export async function up(queryInterface, Sequelize) {
    const projects = [
        {
            id: 1,
            name: "Lắp đặt hệ thống VRF - Tòa nhà A",
            description: "Lắp đặt hệ thống điều hòa VRF cho tòa nhà văn phòng, gồm thiết bị, ống gió, và cân chỉnh hệ thống",
            status: "active",
            priority: "high",
            progress: 25.00,
            start_date: new Date("2025-11-01T00:00:00.000Z"),
            end_date: new Date("2026-02-15T00:00:00.000Z"),
            manager_id: 2,
            budget: 350000000.0,
            spent: 50000000.0,
            total_tasks: 120,
            completed_tasks: 30,
            overdue_tasks: 2,
            pending_reports: 1,
            planned_manpower: 800,
            consumed_manpower: 200,
            timeline: JSON.stringify([{ month: '2025-11', progress: 10, completed: 12, manpower: 100 }, { month: '2025-12', progress: 25, completed: 30, manpower: 100 }]),
            budget_details: JSON.stringify([{ category: 'Equipment', allocated: 250000000.0, spent: 40000000.0 }, { category: 'Labor', allocated: 80000000.0, spent: 10000000.0 }]),
            created_by: 1,
            created_at: new Date("2025-11-01T00:00:00.000Z"),
            updated_at: new Date(),
        },
        {
            id: 2,
            name: "Nâng cấp cụm máy lạnh Chiller - Trung tâm B",
            description: "Thay thế cụm chiller và cải tạo hệ thống làm mát cho trung tâm thương mại",
            status: "in_progress",
            priority: "high",
            progress: 5.50,
            start_date: new Date("2026-03-01T00:00:00.000Z"),
            end_date: new Date("2026-06-30T00:00:00.000Z"),
            manager_id: 3,
            budget: 1200000000.0,
            spent: 0.0,
            total_tasks: 60,
            completed_tasks: 0,
            overdue_tasks: 0,
            pending_reports: 0,
            planned_manpower: 1200,
            consumed_manpower: 0,
            timeline: JSON.stringify([]),
            budget_details: JSON.stringify([{ category: 'Chiller', allocated: 900000000.0, spent: 0.0 }, { category: 'Installation', allocated: 300000000.0, spent: 0.0 }]),
            created_by: 1,
            created_at: new Date("2025-12-01T00:00:00.000Z"),
            updated_at: new Date(),
        },
        {
            id: 3,
            name: "Hoàn thiện hệ thống ống gió và HVAC - Trung tâm Thương mại C",
            description: "Thi công ống gió, ống hút, và lắp đặt hệ thống HVAC toàn khu vực sảnh chính",
            status: "active",
            priority: "medium",
            progress: 40.00,
            start_date: new Date("2025-10-15T00:00:00.000Z"),
            end_date: new Date("2026-01-31T00:00:00.000Z"),
            manager_id: 4,
            budget: 500000000.0,
            spent: 150000000.0,
            total_tasks: 200,
            completed_tasks: 80,
            overdue_tasks: 5,
            pending_reports: 2,
            planned_manpower: 600,
            consumed_manpower: 240,
            timeline: JSON.stringify([{ month: '2025-10', progress: 10, completed: 20, manpower: 80 }, { month: '2025-11', progress: 40, completed: 80, manpower: 160 }]),
            budget_details: JSON.stringify([{ category: 'Ducting', allocated: 200000000.0, spent: 60000000.0 }, { category: 'Labor', allocated: 150000000.0, spent: 80000000.0 }]),
            created_by: 2,
            created_at: new Date("2025-10-15T00:00:00.000Z"),
            updated_at: new Date(),
        },
        {
            id: 4,
            name: "Lắp đặt hệ thống VRF & điều hòa - Khu căn hộ D",
            description: "Cung cấp và lắp đặt hệ thống điều hòa cho toàn bộ block căn hộ",
            status: "active",
            priority: "high",
            progress: 10.00,
            start_date: new Date("2025-12-01T00:00:00.000Z"),
            end_date: new Date("2026-04-01T00:00:00.000Z"),
            manager_id: 3,
            budget: 800000000.0,
            spent: 40000000.0,
            total_tasks: 150,
            completed_tasks: 15,
            overdue_tasks: 0,
            pending_reports: 0,
            planned_manpower: 700,
            consumed_manpower: 70,
            timeline: JSON.stringify([{ month: '2025-12', progress: 5, completed: 5, manpower: 30 }]),
            budget_details: JSON.stringify([{ category: 'Units', allocated: 500000000.0, spent: 30000000.0 }, { category: 'Labor', allocated: 300000000.0, spent: 10000000.0 }]),
            created_by: 3,
            created_at: new Date("2025-12-01T00:00:00.000Z"),
            updated_at: new Date(),
        },
        {
            id: 5,
            name: "Hợp đồng bảo trì hệ thống điều hòa - Bệnh viện E",
            description: "Hợp đồng 12 tháng: bảo trì, vệ sinh, và kiểm tra hiệu năng hệ thống điều hòa",
            status: "active",
            priority: "low",
            progress: 0.00,
            start_date: new Date("2026-01-01T00:00:00.000Z"),
            end_date: new Date("2026-12-31T00:00:00.000Z"),
            manager_id: 1,
            budget: 150000000.0,
            spent: 0.0,
            total_tasks: 12,
            completed_tasks: 0,
            overdue_tasks: 0,
            pending_reports: 0,
            planned_manpower: 120,
            consumed_manpower: 0,
            timeline: JSON.stringify([]),
            budget_details: JSON.stringify([{ category: 'Maintenance', allocated: 150000000.0, spent: 0.0 }]),
            created_by: 4,
            created_at: new Date("2025-12-15T00:00:00.000Z"),
            updated_at: new Date(),
        },
    ];

    await queryInterface.bulkInsert("projects", projects, {});
}

export async function down(queryInterface, Sequelize) {
    await queryInterface.bulkDelete("projects", { id: { [Sequelize.Op.in]: [1, 2, 3, 4, 5] } }, {});
}
